https://www.sotbit.ru/docs/sotbit.multibasket/lesson/sotbit-multibasket-multibasket/ 
https://marketplace.1c-bitrix.ru/solutions/sotbit.multibasket/#tab-install-link

Сотбит: Мультикорзина – несколько корзин в интернет-магазине 

Сотбит: Мультикорзина — это готовый модуль, который позволяет пользователю работать одновременно с несколькими корзинами в интернет-магазине. 
Модуль отлично подойдёт для владельцев B2B портала и B2B кабинета, поскольку значительно расширит их возможности для контрагентов по оформлению заказов. 

Возможности модуля
Модуль позволяет одновременно работать с несколькими корзинами на сайте. Контрагент может добавлять разные товары в корзины и формировать заказы на отдельные поставки с номенклатурой. 
•	Новая корзина 
Интерфейс корзины переработан для удобного взаимодействия с модулем. 
•	Удобная навигация 
Корзины отличаются друг от друга цветом и названием, что позволяет контрагенту быстро находить нужную среди них. 
•	Уникальность 
Каждая из корзин уникальна. При формировании заказа или удалении одной из корзин, остальные корзины будут целы. 
•	Продуманная логика 
При формировании заказа, выбранная корзина удаляется и не отвлекает внимание контрагента. 
•	Удобство для контрагентов 
Больше не нужно концентрироваться на формировании заказа для одной поставки. Чтобы начать формировать другую поставку, достаточно просто создать новую корзину. 
•	Интуитивно понятный интерфейс 
Создание визуально идентичных корзин невозможно. Уже используемый цвет не может быть выбран для новой корзины. 
•	Возможность привязки корзины к складу 
Создание ограниченного набора корзин, где к каждой корзине привязан склад.  У пользователя есть возможность добавить в корзину только те товары, который находятся на складе, привязанном к корзине. 

Отлично дополняет B2B кабинет
Модуль интегрирован разработчиками в Сотбит: B2B кабинет — готовый личный кабинет дилера на Битрикс. Решение отлично подойдёт B2B компаниям для расширения возможностей контрагентов при работе с корзиной. 
* модуль входит в поставку Сотбит: B2B кабинет, протестируйте его работу бесплатно 
sotbit:multibasket.multibasket 
Компонент sotbit:multibasket.multibascket предназначен для одновременной работы с несколькими корзинами на сайте. 
В визуальном редакторе компонент расположен по пути: sotbit > Мультикорзина.
Установка компонента
Если на сайте используется стандартный компонент Битрикса bitrix:sale.basket.basket.line, то найдите подключение этого компонента в шаблоне и замените его строку bitrix:sale.basket.basket.line на sotbit:multibasket.multibasket. Так же проследите, чтобы шаблон был установлен .default.
Если на сайте не используется стандартный компонент корзины, то для добавления компонента мультикорзины вставьте в шаблон шапки сайта следующий код:
1.	$APPLICATION->IncludeComponent(
2.	         "sotbit:multibasket.multibasket", 
3.	         ".default", 
4.	         [],
5.	         false
6.	      );
Стандартный шаблон компонента расположен по пути: Рабочий стол > Контент > Структура сайта > Файлы и папки > local > components > sotbit > multibasket.multibasket > templates > .default > template.php.
Не рекомендуется вносить изменение в стандартный шаблон компонента. Для изменения внешнего вида компонента создайте собственный шаблон на основе стандартного, после чего укажите ваш шаблон в качестве используемого для компонента. В таком случае ваш шаблон будет защищен от потерь в процессе обновления.
После добавления компонента необходимо перейти в публичную часть сайта, включить режим правки и настроить параметры компонента.
Параметры
Поле	Параметр	Описание
Основные параметры
Перечёт корзины только на странице корзины	ONLY_BASKET_PAGE_RECALCULATE	(Y / N) если выбрано Y, то перезагрузка страницы или вызов события sotbitMultibasketSwitch будет происходить только на странице корзины. (требуется правильно указать параметры «Путь к странице корзины»).
Способ обновления корзины при переключении мультикорзины	RECALCULATE_BASKET	Способы обновления корзины:
•	Перезагрузка страницы (при переключении между корзинами будет происходить перезагрузка страницы). 
•	По событию sotbitMultibasketSwitch (при переключении корзины будет вызывается событие sotbitMultibasketSwitch, для реагирования на переключения между корзинами требуется подписаться на данное событие например: BX.addCustomEvent(window, 'sotbitMultibasketSwitch', function() {console.log('корзина переключена')}). 
Остальные параметры компонента аналогичны параметрам компонента bitrix:sale.basket.basket.line, они представлены в таблице ниже.
Параметры
Поле	Параметр	Описание
Шаблон компонента
Шаблон компонента	COMPONENT_TEMPLATE	Указывается шаблон компонента
Основные параметры
Страница корзины	PATH_TO_BASKET	Указывается путь к странице с корзиной. Если страница находится в текущей директории, то достаточно указать ее название.
Страница оформления заказа	PATH_TO_ORDER	Указывается путь к странице оформления заказа. Если страница находится в текущей директории, то достаточно указать ее название.
Показывать количество товаров	SHOW_NUM_PRODUCTS	(Y / N) При отмеченной опции будет показано общее количество товара.
Показывать общую сумму по товару	SHOW_TOTAL_PRICE	(Y / N) При отмеченной опции будет выведена общая сумма по стоимости товаров, находящихся в корзине.
Выводить нулевые значения в пустой корзине	SHOW_EMPTY_VALUES	(Y / N) При отмеченной опции в пустой корзине будут выводится нулевые значения.
Персональный раздел
Отображать персональный раздел	SHOW_PERSONAL_LINK	(Y / N) При отмеченной опции будет выведена ссылка на персональный раздел.
Страница персонального раздела	PATH_TO_PERSONAL	Указывается путь к персональному разделу, где начальной страницей может быть список заказов, профили пользователя и т.д.
Авторизация
Добавить возможность авторизации	SHOW_AUTHOR	(Y / N) При отмеченной опции будет доступна ссылка для авторизации на сайте; станут активны дополнительные поля.
Страница регистрации	PATH_TO_REGISTER	Задается путь к странице регистрации на сайте.
Страница авторизации	PATH_TO_AUTHORIZE	Задается путь к странице авторизации.
Страница профиля	PATH_TO_PROFILE	Указывается путь к странице профиля покупателя.
Список товаров
Показывать список товаров	SHOW_PRODUCTS	(Y / N) При отмеченной опции в корзине будет выводится список добавленных товаров. Кроме того, становятся доступными дополнительные параметры для показа списка товаров.
Показывать отложенные товары	SHOW_DELAY	(Y / N) При отмеченной опции в корзине будут показаны отложенные товары.
Показывать товары, недоступные для покупки	SHOW_NOTAVAIL	(Y / N) При отмеченной опции в корзине будут показаны товары, недоступные в текущий момент для покупки.
Выводить картинку товара	SHOW_IMAGE	(Y / N) При отмеченной опции будет выводится изображение товара.
Выводить цену товара	SHOW_PRICE	(Y / N) При отмеченной опции для товара в корзине будет выведена цена.
Выводить подытог по строке	SHOW_SUMMARY	(Y / N) При отмеченной опции для каждой позиции в корзине будет выводится подытог.
Внешний вид
Отображать корзину поверх шаблона	POSITION_FIXED	(Y / N) При отмеченной опции специальный блок корзины будет отображен поверх других элементов сайта; станут активны дополнительные поля. В противном случае детальная информация по содержимому корзины будет отображена на странице.
Положение по горизонтали	POSITION_HORIZONTAL	Выбирается положение блока корзины по горизонтали: справа или слева. Параметр доступен, если отмечена опция Отображать корзину поверх шаблона.
Положение по вертикали	POSITION_VERTICAL	Выбирается положение блока корзины по горизонтали: вверху или внизу. Параметр доступен, если отмечена опция Отображать корзину поверх шаблона.
Дополнительные настройки
Не показывать на страницах корзины и оформления заказа	HIDE_ON_BASKET_PAGES	(Y / N) При отмеченной опции компонент на страницах корзины и оформления заказа будет скрыт. Рекомендуется оставлять данную опцию включенной во избежание снижения производительности на этих страницах.
Чтобы изменить шаблон страницы корзины в публичной части сайта, необходимо открыть настройки компонента bitrix:sale.basket.basket и изменить шаблон компонента на multibasket.
После изменения шаблона страница корзины должна выглядеть так:
 
Настройки 
Настройки модуля располагаются по следующему пути: Администрирование > Сотбит > Сотбит: Мультикорзина > Настройки > Выбрать необходимый сайт.
Настройки
Поле	Описание
Включить работу модуля для сайта 	(Y / N) При отмеченной опции работа модуля на сайте будет включена.
Удалить брошенные корзины незарегистрированных пользователей 	(Y / N) При отмеченной опции удаляет брошенные корзины незарегистрированных пользователей.
Корзина считается брошенной, если не обновлять, суток 	Указывается время, по истечении которого корзина считается брошенной.
Удалять брошенные корзины зарегистрированных пользователей 	(Y / N) При отмеченной опции удаляет брошенные корзины зарегистрированных пользователей.
Корзина зарегистрированного пользователя считается брошенной, если не обновлялась, суток	Указывается время, по истечении которого корзина считается брошенной для зарегистрированного пользователя.
Режим работы модуля	Режим работы модуля:
•	Стандарнтый – режим, где пользователи сами управляют корзинами, могут добавлять или перемещать любые товары в корзины. 
•	Привязка корзины к складу – режим работы, в котором администратор создает ограниченный набор корзин, где к каждой корзине привязан склад.  У пользователя есть возможность добавить в корзину только те товары, которые находятся на складе, привязанном к корзине. 
При изменении режима работы все корзины пользователей будут перезаписаны.
При отключении работы модуля компонент sotbit:multibasket.multibasket станет недоступен для использования.

Документация Сотбит: Мультикорзина. Форматы работы корзины. 
Стандартный режим 
Стандартный режим – режим работы модуля, где пользователи сами управляют корзинами, могут добавлять или перемещать любые товары в корзины.
Чтобы переключить режим работы модуля на Стандартный, необходимо перейти в Администрирование > Сотбит > Сотбит: Мультикорзина > Настройки > Выбрать необходимый сайт. Далее на форме Основные настройки необходимо выбрать опцию Режим работы модуля – Стандартный. После чего необходимо сохранить внесенные изменения.
При выполненной настройке в публичной части сайта компонент sotbit:multibasket.multibascket будет выглядеть следующим образом: 
 
В данном режиме есть возможность заполнять корзину любыми товарами, вне зависимости от склада, на котором расположен товар. 
При необходимости, можно создать новую корзину и работать с ней.
Для создания новой корзины, необходимо в публичной части сайта:
1.	Навести мышь на иконку корзины.
2.	Нажать кнопку Добавить.
После чего откроется форма Создать новую корзину, представленная на рисунке ниже:
 
Параметры
Поле	Описание
Название корзины	Необходимо ввести имя новой корзины.
Поле выбора цвета корзины	Необходимо выбрать цвет новой корзины.
Поля являются обязательными.
Поле Название корзины имеет ограничение по количеству символов (20 символов) и может содержать любые символы в названии.
Если для корзины не задано название или не выбран цвет, при попытке сохранить корзину появится уведомление о том, какое поле необходимо заполнить.
После успешного сохранения новой корзины, она станет активна в списке корзин и Вы окажетесь в ней. 
Новая корзина в списке корзин выглядит следующим образом:
 

Режим привязки к складу 
Режим привязки корзины к складу – режим работы, в котором администратор создает ограниченный набор корзин, где к каждой корзине привязан склад.  У пользователя есть возможность добавить в корзину только те товары, которые находятся на складе, привязанном к корзине.
Чтобы переключить режим работы модуля на Режим привязки корзины к складу, необходимо перейти в Администрирование > Сотбит > Сотбит: Мультикорзина > Настройки > Выбрать необходимый сайт. Далее на форме Основные настройки необходимо выбрать опцию Режим работы модуля – Привязка корзины к складу. После выбора данной опции станет доступна вкладка Настройки корзин.
Далее необходимо осуществить привязку корзины к складу. Перейдем на вкладку Настройки корзин и выберем склады, для которых необходимо создать корзины. Один склад – одна корзина. После чего необходимо сохранить внесенные изменения.
При изменении режима работы все корзины пользователей будут перезаписаны.
При выполненной настройке в публичной части сайта компонент sotbit:multibasket.multibascket будет выглядеть следующим образом: 
 
В выбранную корзину можно добавлять только те товары, которые привязаны к этому складу. Если товара нет на складе, его невозможно добавить в корзину. В корзину нельзя добавить большее количество товаров, чем имеется на складе.
Установка
1. Установить модуль
2. Перейти в административный раздел.
3. Перейти к настройке шаблона сайта. (Настройки -> Шаблоны сайтов).
4. Выбрать текущий используемый шаблон:
 
5.1 Если использовался стандартный компонент битрикса «bitrix:sale.basket.basket.line», то найдите в коде шаблона строчку «bitrix:sale.basket.basket.line» и замените её на «sotbit:multibasket.multibasket».
5.2 Нажмите кнопку сохранить.
5.3 Перейдите в публичный раздел сайта.
5.4 На месте старой корзины появится новая мультикорзина, далее компонент можно настроить из режима правки.

6.1 Если на сайте не используется стандартный компонент корзины, то для добавления компонента мультикорзины вставьте в код шаблона сайта следующий код:
<div style="width: 230px;">
      <?$APPLICATION->IncludeComponent(
         "sotbit:multibasket.multibasket", 
         ".default", 
         [],
         false
      );?>
   </div>

Дальнейшие действия аналогичны описанным в пункте 5.

7. Для отражения цвета в default корзине выбрать в параметрах компонента шаблон sotbit.multibasket:
 
 

Параметры компонента мультикорзины:

1. Способ обновления корзины при переключении мультикорзины:
•	Перезагрузка страницы (при переключении между корзинами будет происходить перезагрузка страницы)
•	по событию «sotbitMultibasketSwitch» (при переключении корзины будет вызывается событие «sotbitMultibasketSwitch», для реагирования на переключения между корзинами требуется подписаться на данное событие например:
•	BX.addCustomEvent(window, 'sotbitMultibasketSwitch', function() {console.log('корзина переключена')})
2. Перечёт корзины только на странице корзины: (Y / N) если выбрано Y, то перезагрузка страницы или вызов события 'sotbitMultibasketSwitch'  будет происходить только на странице корзины. (требуется правильно указать параметры «Путь к странице корзины»)

3. Остальные параметры компонента аналогичны параметрам компонента «bitrix:sale.basket.basket.line» смотри https://dev.1c-bitrix.ru/user_help/components/magazin/basket/sale_basket_basket_line.php
Тех. поддержка 
Если в документации не нашлась необходимая информация, обратитесь в нашу тех. поддержку.
Время работы: будние дни, 10:00 – 18:00 по мск
Максимальное время ответа: 8 рабочих часов
Помощь можно получить быстро и без регистрации в любой удобной форме: через чат, bitrix24, telegram, skype, facebook, instagram, вконтакте или по телефону. Нажмите на кнопку в левом нижнем углу экрана и выберите подходящий вариант связи.
Для решения самых сложных вопросов используются обращения. Авторизация на сайте обязательна для их создания . Если у Вас еще нет учётной записи на нашем сайте, на странице тех. поддержки нажмите на кнопку Регистрация.
После заполнения всех полей нажмите кнопку Регистрация.
При каждом изменении в обращении будут приходить уведомления на указанный про регистрации email адрес.
Если все поля заполнены корректно, то авторизация произойдет автоматически и откроется список обращений.
Чтобы создать обращение в тех. поддержку, нажмите кнопку Создать новое обращение и заполните открывшуюся форму.
После заполнения полей формы обращения просто нажмите кнопку Отправить.
Указывайте категорию обращения, а при необходимости внесения изменений на сайте добавляйте данные для входа в административную часть сайта и FTP-доступ. Подробное описание проблемы и предоставление всех данных ускорит процесс обработки обращения.
Ответы на электронную почту будут игнорироваться. Поэтому, пожалуйста, не отвечайте на письма-уведомления. Все общение со службой тех. поддержки идет через интерфейс нашего сайта, либо выбранный сервис чата, но не через почту.
